<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canal TV Met√°lico Profesional</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <style>
        /* Estilos de la Capa Met√°lica y Presentaci√≥n */
        :root {
            --naranja-metal: linear-gradient(180deg, #ffb347 0%, #ff8c00 50%, #e65100 100%);
            --brillo-metal: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            --plyr-color-main: #ff6600;
        }

        body {
            background-color: #0a0a0a;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Segoe UI', sans-serif;
        }

        /* El Reproductor como una sola pieza integrada */
        .contenedor-tv {
            width: 95%;
            max-width: 850px;
            background: var(--naranja-metal);
            padding: 10px;
            border-radius: 30px;
            box-shadow: 0 0 50px rgba(255, 85, 0, 0.3), inset 0 0 15px rgba(255,255,255,0.4);
            position: relative;
            overflow: hidden;
        }

        /* Reflejo met√°lico sobre el marco */
        .contenedor-tv::after {
            content: "";
            position: absolute;
            top: 0; left: -100%;
            width: 50%; height: 100%;
            background: var(--brillo-metal);
            transform: skewX(-25deg);
            pointer-events: none;
            animation: reflejo 6s infinite;
        }

        @keyframes reflejo {
            0% { left: -100%; }
            20% { left: 150%; }
            100% { left: 150%; }
        }

        .pantalla {
            background: #000;
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 4px solid #1a1a1a;
        }

        /* Cabecera integrada */
        .info-bar {
            background: #1a1a1a;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #333;
        }

        .status {
            color: #ff4500;
            font-weight: bold;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Botonera integrada al dise√±o inferior */
        .controles-integrados {
            background: #1a1a1a;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            border-top: 2px solid #333;
        }

        .btn-tv {
            background: var(--naranja-metal);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 11px;
            box-shadow: 0 4px 0 #9e3a00;
            transition: 0.1s;
        }

        .btn-tv:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #9e3a00;
        }

        .btn-tv.secundario {
            background: #333;
            box-shadow: 0 4px 0 #111;
        }
    </style>
</head>
<body>

<div class="contenedor-tv">
    <div class="pantalla">
        <div class="info-bar">
            <span class="status">‚óè TRANSMISI√ìN CONSTANTE</span>
            <span id="titulo-video" style="color: #ffca28; font-size: 13px;">Sintonizando...</span>
        </div>

        <video id="player" playsinline controls></video>

        <div class="controles-integrados">
            <button class="btn-tv" onclick="compartir()">üì§ Compartir</button>
            <button class="btn-tv secundario" onclick="pausarGuardar()">‚è∏Ô∏è Pausa / Vivo</button>
            <button class="btn-tv" onclick="siguiente()">Siguiente ‚è≠Ô∏è</button>
        </div>
    </div>
</div>

<script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
<script>
    const playlist = [
        { title: "Riesgo de Vuelo (2025)", url: "https://ia800900.us.archive.org/28/items/1.-riesgo-de-vuelo-2025-espanol_202506/1.Riesgo%20de%20vuelo%202025%F0%9F%87%AE%F0%9F%87%B9%20espa%C3%B1ol.mp4", dur: 7200 },
        { title: "Intensa Mente 2", url: "https://ia600900.us.archive.org/28/items/1.-riesgo-de-vuelo-2025-espanol_202506/Intensa%20Mente%202.mp4", dur: 5760 },
        { title: "C√≥mo entrenar a tu drag√≥n (2025)", url: "https://ia600900.us.archive.org/28/items/1.-riesgo-de-vuelo-2025-espanol_202506/C%C3%B3mo%20entrenar%20a%20tu%20drag%C3%B3n%202025.mp4", dur: 6000 }
    ];

    const player = new Plyr('#player', { autoplay: true, muted: true });

    // Funci√≥n para que la transmisi√≥n sea CONSTANTE (TV Real)
    function sincronizarCanal() {
        const duracionTotal = playlist.reduce((a, b) => a + b.dur, 0);
        const tiempoUnix = Math.floor(Date.now() / 1000);
        const tiempoEnCiclo = tiempoUnix % duracionTotal;

        let acumulado = 0;
        for (let i = 0; i < playlist.length; i++) {
            if (tiempoEnCiclo < acumulado + playlist[i].dur) {
                const video = playlist[i];
                const puntoExacto = tiempoEnCiclo - acumulado;
                
                document.getElementById('titulo-video').innerText = video.title;
                player.source = { type: 'video', sources: [{ src: video.url, type: 'video/mp4' }] };
                
                player.on('ready', () => {
                    player.currentTime = puntoExacto;
                    player.play();
                });
                break;
            }
            acumulado += playlist[i].dur;
        }
    }

    document.addEventListener('DOMContentLoaded', sincronizarCanal);
    player.on('ended', sincronizarCanal);

    function pausarGuardar() {
        if (player.playing) {
            player.pause();
            localStorage.setItem('tv_pos', player.currentTime);
        } else {
            sincronizarCanal(); // Al darle play de nuevo, vuelve al vivo constante
        }
    }

    function siguiente() {
        // En una TV real el bot√≥n siguiente te lleva al pr√≥ximo programa del horario
        alert("Sincronizando con el siguiente bloque horario...");
        sincronizarCanal(); 
    }

    function compartir() {
        const url = window.location.href;
        navigator.clipboard.writeText(url);
        alert("Enlace del canal copiado.");
    }
</script>
</body>
</html>
