<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor MP4 y M3U8</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            margin: 0;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff;
        }

        .video-container {
            position: relative;
            width: 80%;
            max-width: 800px;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
        }

        video {
            width: 100%;
            display: block;
            background: #000;
        }

        .controls {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.4));
            display: flex;
            align-items: center;
            padding: 10px 15px;
            transition: all 0.3s ease-in-out;
            opacity: 1;
        }

        .controls.hidden {
            opacity: 0;
            pointer-events: none;
            transform: translateY(5px);
        }

        .controls button {
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 1.2em;
            padding: 6px 8px;
            margin: 0 3px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        .controls button:hover {
            background-color: rgba(255, 255, 255, 0.15);
            color: #f0f0f0;
        }

        .controls input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            outline: none;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.2s ease;
        }

        .controls input[type="range"]:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .controls input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: #fff;
            border-radius: 50%;
            border: 1px solid rgba(0,0,0,0.2);
            cursor: pointer;
            position: relative;
            top: -5px;
            transition: transform 0.2s ease;
        }

        .controls input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        .timecode {
            color: #eee;
            font-size: 0.85em;
            margin: 0 12px;
            width: 90px;
            text-align: center;
            user-select: none;
        }

        .volume-controls {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .volume-controls input[type="range"] {
            width: 90px;
            margin: 0 8px;
        }

        .playback-controls {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }

        .left-controls {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .right-controls {
            display: flex;
            align-items: center;
        }

        /* Estilos para pantalla completa */
        .video-container:-webkit-full-screen {
            width: 100%;
            height: 100%;
            border-radius: 0;
        }

        .video-container:fullscreen {
            width: 100%;
            height: 100%;
            border-radius: 0;
        }

        .fullscreen-icon {
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <div class="video-container" id="videoContainer">
        <video id="video" preload="metadata" crossorigin="anonymous">
            <source src="REEMPLAZAR_VIDEO_MP4.mp4" type="video/mp4">
            <source src="REEMPLAZAR_VIDEO_M3U8.m3u8" type="application/x-mpegURL">
            Tu navegador no soporta el video.
        </video>

        <div class="controls" id="controls">
            <div class="left-controls">
                <div class="playback-controls">
                    <button id="rewind15Btn" title="Retroceder 15s">
                        <i class="fas fa-backward"></i> 15
                    </button>
                    <button id="playPauseBtn" title="Reproducir/Pausar" style="font-size: 1.4em;">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="forward15Btn" title="Adelantar 15s">
                        15 <i class="fas fa-forward"></i>
                    </button>
                </div>

                <div class="volume-controls">
                    <button id="volumeBtn" title="Volumen">
                        <i id="volumeIcon" class="fas fa-volume-up"></i>
                    </button>
                    <input type="range" id="volume" min="0" max="1" value="1" step="0.01">
                </div>

                <div class="timecode" id="timecode">0:00 / 0:00</div>
            </div>

            <input type="range" id="progress" min="0" max="100" value="0" step="0.1">

            <div class="right-controls">
                <button id="fullscreenBtn" title="Pantalla completa">
                    <i class="fas fa-expand fullscreen-icon"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        const video = document.getElementById('video');
        const videoContainer = document.getElementById('videoContainer');
        const controls = document.getElementById('controls');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const rewind15Btn = document.getElementById('rewind15Btn');
        const forward15Btn = document.getElementById('forward15Btn');
        const volumeBtn = document.getElementById('volumeBtn');
        const volumeIcon = document.getElementById('volumeIcon');
        const volume = document.getElementById('volume');
        const progress = document.getElementById('progress');
        const timecode = document.getElementById('timecode');
        const fullscreenBtn = document.getElementById('fullscreenBtn');

        let isPlaying = false;
        let isMuted = false;
        let timeout;

        // Formatear tiempo en MM:SS
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const m = Math.floor(seconds / 60);
            const s = Math.floor(seconds % 60);
            return `${m}:${(s < 10 ? '0' : '') + s}`;
        }

        // Reproducir/Pausar
        function togglePlay() {
            if (isPlaying) {
                video.pause();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            } else {
                video.play();
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
            }
            isPlaying = !isPlaying;
        }

        // Avanzar/Retroceder 15 segundos
        function skipSeconds(seconds) {
            video.currentTime = Math.max(0, Math.min(video.duration, video.currentTime + seconds));
        }

        // Alternar silencio
        function toggleMute() {
            video.muted = !isMuted;
            isMuted = !isMuted;

            if (isMuted) {
                volumeIcon.className = 'fas fa-volume-mute';
            } else {
                volumeIcon.className = 'fas fa-volume-up';
            }
        }

        // Actualizar volumen
        function updateVolume() {
            video.volume = volume.value;
        }

        // Actualizar barra de progreso y tiempo
        function handleProgress() {
            const duration = video.duration;
            const currentTime = video.currentTime;
            progress.value = (currentTime / duration) * 100;
            timecode.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
        }

        // Establecer posiciÃ³n del video
        function setProgress() {
            if (isNaN(video.duration)) return;
            video.currentTime = (progress.value * video.duration) / 100;
        }

        // Alternar pantalla completa
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                videoContainer.requestFullscreen().catch(err => {
                    alert(`Error al activar pantalla completa: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // Ocultar/Mostrar controles
        function hideControls() {
            controls.classList.add('hidden');
        }

        function showControls() {
            controls.classList.remove('hidden');
        }

        function resetTimeout() {
            clearTimeout(timeout);
            showControls();
            timeout = setTimeout(hideControls, 3000);
        }

        // Eventos
        video.addEventListener('loadedmetadata', () => {
            timecode.textContent = `0:00 / ${formatTime(video.duration)}`;
        });

        video.addEventListener('timeupdate', handleProgress);
        video.addEventListener('play', () => {
            isPlaying = true;
            playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
        });
        video.addEventListener('pause', () => {
            isPlaying = false;
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
        });

        progress.addEventListener('input', setProgress);
        playPauseBtn.addEventListener('click', togglePlay);
        rewind15Btn.addEventListener('click', () => skipSeconds(-15));
        forward15Btn.addEventListener('click', () => skipSeconds(15));
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        volumeBtn.addEventListener('click', toggleMute);
        volume.addEventListener('input', updateVolume);

        videoContainer.addEventListener('mousemove', resetTimeout);
        videoContainer.addEventListener('click', resetTimeout);

        // Ocultar controles inicialmente
        timeout = setTimeout(hideControls, 3000);
    </script>
</body>
    </html>
    
